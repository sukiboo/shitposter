steps:
  holidays:
    type: scrape_holidays
    provider: checkiday
    date: null

  holiday:
    type: choose_holiday
    provider: openai
    inputs: holidays
    template: "Pick the best holiday:"

  prompt:
    type: construct_prompt
    provider: openai
    inputs: holiday
    template: "Generate a short image prompt about a cat during {holiday}"

  image:
    type: generate_image
    provider: openai
    inputs: holiday, prompt
    template: "Generate an image of {prompt} during {holiday}."

  caption:
    type: generate_caption
    provider: openai
    inputs: holiday, prompt
    template: "Generate a funny caption (use emoji!) for an image of {prompt} during {holiday}. Your answer must be a single caption, nothing else."

  publish:
    type: publish_post
    inputs: image, caption
    platforms:
      - telegram
